<section class="col-12" [hidden]="(editQuery$ | async) !== null" 
  style="background-color: lightgoldenrodyellow; padding-bottom: 1em;">
  <div class="border center" style="margin-left: 1em; padding-left: 1em; font-weight: 900; font-size: 150%;">
    {{ program?.value?.length }} queries found
  </div>
  <section class="col-12">
    <div class="center py2">
      <button md-raised-button color="primary" (click)="handleAddQuery()"> 
        ADD QUERY 
      </button>
    </div>
    <div *ngFor="let query of program.value" 
      class="col-10 bg-darken-2 flex border" 
      style="margin: 0 auto; margin-top: 0.5em;">
      <table style="width:80%;">
        <colgroup span="4">
          <col style="width: 25%;">
          <col style="width: 25%;">
          <col style="width: 25%;">
          <col style="width: 25%;">
        </colgroup>
        <thead class="border-bottom">
          <tr>
            <th>Key</th>
            <th>Type</th>
            <th>Qualifier</th>
            <th>Value</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let condition of query.conditions">
            <td>{{condition.key.name}}</td>
            <td>{{condition.key.type}}</td>
            <div [ngSwitch]="condition.qualifier">
              <td *ngSwitchCase="'lessThan'"> &lt; </td>
              <td *ngSwitchCase="'lessThanOrEqual'"> &lt;= </td>
              <td *ngSwitchCase="'equal'"> = </td>
              <td *ngSwitchCase="'greaterThanOrEqual'"> &gt;= </td>
              <td *ngSwitchCase="'greaterThan'"> &gt; </td>
              <td *ngSwitchDefault></td>
            </div>
            <td>{{condition.value}}</td>
          </tr>
        </tbody>
      </table>
      <div style="width: 5%;">
        <button md-mini-fab color="primary"  (click)="editQuery$.next(query)">
          <i class="material-icons">create</i>
        </button>
      </div>
      <div class="px1"></div>
      <div style="width: 5%">
        <button md-mini-fab color="warn" (click)="deleteQuery(query)">
          <i class="material-icons">clear</i>
        </button>
      </div>
    </div>
  </section>
  <section *ngIf="program.value.length === 0" class="py1 center">
    There are no queries associated with this program.
  </section>
</section>
<app-query-edit [query]="(editQuery$ | async)" (save)="handleSave($event)" (cancel)="handleCancel($event)">
</app-query-edit>