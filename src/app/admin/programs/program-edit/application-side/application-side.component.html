<section class="col-12" [hidden]="addQuery">
  <div class="py2"></div>
  <section class="col-12" >
    <div class="center py2"> 
      <button md-raised-button color="primary"
        (click)="addQuery = true"> ADD QUERY 
      </button> 
    </div>
    <div *ngFor="let query of (state$ | async)?.queries" class="mt2 bg-darken-2 flex">
      <table style="width:80%">
        <tr>
          <th>Key</th>
          <th>Type</th>
          <th>Qualifier</th>
          <th>Value</th> 
        </tr>
        <tr *ngFor="let condition of query.conditions">
          <td>{{condition.key.name}}</td>
          <td>{{condition.type}}</td>
          <div [ngSwitch]="condition.qualifier">
            <td *ngSwitchCase="'lessThan'"> &lt; </td>
            <td *ngSwitchCase="'lessThanOrEqual'"> &lt;= </td>
            <td *ngSwitchCase="'equal'"> =  </td>
            <td *ngSwitchCase="'greaterThanOrEqual'"> &gt;= </td>
            <td *ngSwitchCase="'greaterThan'"> &gt; </td>
            <td *ngSwitchDefault></td>
          </div>
          <td>{{condition.value}}</td>
        </tr>
      </table>
      <button md-mini-fab color="primary" (click)="edit$.next(query)">
        <i class="material-icons">create</i>
      </button>
      <div class="px1"></div>
      <button md-mini-fab color="warn" (click)="delete$.next(query)">
        <i class="material-icons">clear</i>
      </button>
    </div>
  </section>
  <section *ngIf="program.application?.length === 0" class="py1 center">
    There are no queries associated with this program.
  </section>
</section>
<app-query-edit 
  *ngIf="addQuery" 
  [query]="editQuery$" 
  [save]="saveQuery$" 
  [cancel]="cancel$">
</app-query-edit>
